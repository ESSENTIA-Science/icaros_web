import{j as m}from"./index-Ci8dlUyU.js";import{b as o}from"./react-vendor-CynPq6tW.js";const x=(e,s,r)=>{const n=()=>s[e.findIndex(a=>window.matchMedia(a).matches)]??r,[c,i]=o.useState(n);return o.useEffect(()=>{const a=()=>i(n);return e.forEach(d=>window.matchMedia(d).addEventListener("change",a)),()=>e.forEach(d=>window.matchMedia(d).removeEventListener("change",a))},[e]),c},v=()=>{const e=o.useRef(null),[s,r]=o.useState({width:0});return o.useLayoutEffect(()=>{if(!e.current)return;const n=new ResizeObserver(([c])=>{r({width:c.contentRect.width})});return n.observe(e.current),()=>n.disconnect()},[]),[e,s]},E=e=>Promise.all(e.map(s=>new Promise(r=>{const n=new Image;n.src=s,n.onload=n.onerror=r})));function b({items:e,onItemClick:s,onReady:r}){const n=x(["(min-width:1400px)","(min-width:1000px)","(min-width:600px)"],[4,3,2],1),[c,{width:i}]=v(),a=4;o.useEffect(()=>{E(e.map(t=>t.img)).then(()=>{r?.()})},[e,r]);const{grid:d,maxHeight:g}=o.useMemo(()=>{if(!i)return{grid:[],maxHeight:0};const t=Array(n).fill(0),l=i/n;return{grid:e.map(u=>{const h=t.indexOf(Math.min(...t)),p=h*l,w=t[h],f=u.height/2+a;return t[h]+=f,{...u,x:p,y:w,w:l,h:f-a}}),maxHeight:Math.max(...t,0)}},[e,n,i]);return m.jsx("div",{ref:c,className:"list",style:{height:g},children:d.map(t=>m.jsx("div",{className:"item-wrapper",onClick:()=>s(t),style:{width:t.w,height:t.h,transform:`translate(${t.x}px, ${t.y}px)`},children:m.jsx("div",{className:"item-img",style:{backgroundImage:`url(${t.img})`}})},t.id))})}export{b as default};
